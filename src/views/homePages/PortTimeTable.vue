<template>
  <main>
    <div>
      <p>–ë–æ–æ–º—Ç—ã–Ω “Ø–Ω–¥—Å—ç–Ω —Ü–∞–≥–∏–π–Ω —Ö—É–≤–∞–∞—Ä—å –æ—Ä—É—É–ª–∞—Ö —Ö—É—É–¥—Å–∞–Ω–¥ —Ç–∞–≤—Ç–∞–π –º–æ—Ä–∏–ª–Ω–æ —É—É.</p>
      <p>{{ borderPortName.name }}</p>
    </div>
    <div class="borderPort" v-for="value in borderPortName" :key="value._id">
      <el-button @click="portClick(value.name, value._id)" type="success" plain style="margin-left: 20px;">
        {{ value.name }}
      </el-button>
    </div>
    <div>

      <el-drawer title="I am the title" :visible.sync="drawer" :width="70" :size="900" :with-header="false">
        <span class="is-size-4 garchig">{{ name }}—ã–Ω —Ü–∞–≥–∏–π–Ω —Ö—É–≤–∞–∞—Ä—å –æ—Ä—É—É–ª–∞—Ö –≥—ç–∂ –±–∞–π–Ω–∞</span>
        <div>
          <el-checkbox v-model="portWork">–ë–æ–æ–º—Ç –∞–∂–∏–ª–¥–∞–≥–≥“Ø–π –±–æ–ª –Ω–∞–º–∞–π–≥ —Å–æ–Ω–≥–æ–æ—Ä–æ–π.</el-checkbox>
        </div>
        <div v-if="!portWork">
          <div>
            <div>
              <p>–≠—Ö–ª—ç—Ö –±–æ–ª–æ–Ω —Ö–∞–∞—Ö —Ü–∞–≥ —Ç–æ—Ö–∏—Ä—É—É–ª–Ω–∞ —É—É</p>
            </div>
            <el-time-select placeholder="–≠—Ö–ª—ç—Ö —Ü–∞–≥" v-model="startTime"
              :picker-options="{ start: '05:00', step: '00:30', end: '23:00' }">
            </el-time-select>
            <el-time-select placeholder="–î—É—É—Å–∞—Ö —Ü–∞–≥" v-model="endTime"
              :picker-options="{ start: '05:00', step: '00:30', end: '23:59', minTime: startTime }">
            </el-time-select>
          </div>

          <div>
            <el-checkbox v-model="checked">–¶–∞–π–Ω—ã —Ü–∞–≥–≥“Ø–π –±–æ–ª –Ω–∞–º–∞–π–≥ —Å–æ–Ω–≥–æ</el-checkbox>
            <div v-if="!checked">
              <div>
                <p>–¶–∞–π–Ω—ã —Ü–∞–≥ –æ—Ä—É—É–ª–Ω–∞ —É—É?</p>
              </div>
              <el-time-select placeholder="–≠—Ö–ª—ç—Ö —Ü–∞–≥" v-model="tsaiStartTime" :picker-options="{
                start: '05:00',
                step: '00:30',
                end: '23:00'
              }">
              </el-time-select>
              <el-time-select placeholder="–î—É—É—Å–∞—Ö —Ü–∞–≥" v-model="tsaiEndTime" :picker-options="{
                start: '05:00',
                step: '00:30',
                end: '23:59',
                minTime: tsaiStartTime
              }">
              </el-time-select>
            </div>
            <div>
              <p>–¢–∞–π–ª–±–∞—Ä –æ—Ä—É—É–ª–Ω–∞ —É—É</p>
            </div>
            <el-input type="textarea" :rows="2" placeholder="–¢–∞–π–ª–±–∞—Ä –æ—Ä—É—É–ª–Ω–∞ —É—É" v-model="portDescription">
            </el-input>

            <el-checkbox v-model="amraltiinOdor">–ê–º—Ä–∞–ª—Ç—ã–Ω ”©–¥”©—Ä–≥“Ø–π –±–æ–ª –Ω–∞–º–∞–π–≥ —Å–æ–Ω–≥–æ</el-checkbox>
            <div v-if="!amraltiinOdor">
              <div>
                <p>–ê–º—Ä–∞—Ö –≥–∞—Ä–∞–≥ —Å–æ–Ω–≥–æ–Ω–æ —É—É</p>
              </div>
              <div>
                <el-checkbox-group v-model="checkboxGroup1">
                  <el-checkbox-button v-for="city in cities" :label="city" :key="city">{{ city }}</el-checkbox-button>
                </el-checkbox-group>
              </div>
            </div>
          </div>
          <div class="block">
            <span class="demonstration">–•“Ø—á–∏–Ω—Ç—ç–π —Ö—É–≥–∞—Ü–∞–∞</span>
            <el-date-picker v-model="value1" type="daterange" range-separator="To" start-placeholder="Start date"
              end-placeholder="End date">
            </el-date-picker>
          </div>
          <el-row>

            <el-button @click="additionalTransportation = !additionalTransportation" type="warning">–ù—ç–º—ç–ª—Ç —Ç—ç—ç–≤—Ä–∏–π–Ω —Ü–∞–≥
              –æ—Ä—É—É–ª–∞—Ö</el-button>

          </el-row>
          <div v-if="additionalTransportation">
            <div>
              <div>
                <p>–ë—É—Å–∞–¥ —Ç—ç—ç–≤—Ä–∏–π–Ω –Ω—ç—Ä –æ—Ä—É—É–ª–Ω–∞</p>
                <el-input placeholder="–¢—ç—ç–≤—Ä–∏–π–Ω –Ω—ç—Ä–∏–π–≥ –æ—Ä—É—É–ª–Ω–∞ —É—É" v-model="additionName"></el-input>
              </div>
              <div>
                <div>
                  <p>–≠—Ö–ª—ç—Ö –±–æ–ª–æ–Ω —Ö–∞–∞—Ö —Ü–∞–≥ —Ç–æ—Ö–∏—Ä—É—É–ª–Ω–∞ —É—É</p>
                </div>
                <el-time-select placeholder="–≠—Ö–ª—ç—Ö —Ü–∞–≥" v-model="additionStartTime" :picker-options="{
                  start: '05:00',
                  step: '00:30',
                  end: '23:00'
                }">
                </el-time-select>
                <el-time-select placeholder="–î—É—É—Å–∞—Ö —Ü–∞–≥" v-model="additionEndTime" :picker-options="{
                  start: '05:00', step: '00:30', end: '23:59', minTime: additionStartTime
                }">
                </el-time-select>
              </div>
              <el-checkbox v-model="nemeltChecked">–¶–∞–π–Ω—ã —Ü–∞–≥–≥“Ø–π –±–æ–ª –Ω–∞–º–∞–π–≥ —Å–æ–Ω–≥–æ</el-checkbox>
              <div v-if="!nemeltChecked">
                <div>
                  <p>–¶–∞–π–Ω—ã —Ü–∞–≥ –æ—Ä—É—É–ª–Ω–∞ —É—É?</p>
                </div>
                <el-time-select placeholder="–≠—Ö–ª—ç—Ö —Ü–∞–≥" v-model="additionTsaiStartTime"
                  :picker-options="{ start: '05:00', step: '00:30', end: '23:00' }">
                </el-time-select>
                <el-time-select placeholder="–î—É—É—Å–∞—Ö —Ü–∞–≥" v-model="additionTsaiEndTime" :picker-options="{
                  start: '05:00', step: '00:30', end: '23:59',
                  minTime: additionTsaiStartTime
                }">
                </el-time-select>
              </div>
              <div>

                <el-checkbox v-model="nemeltAmraltiinOdor">–ê–º—Ä–∞–ª—Ç—ã–Ω ”©–¥”©—Ä–≥“Ø–π –±–æ–ª –Ω–∞–º–∞–π–≥ —Å–æ–Ω–≥–æ</el-checkbox>
                <div v-if="!nemeltAmraltiinOdor">
                  <el-checkbox-group v-model="checkboxGroup2">
                    <el-checkbox-button v-for="city in cities" :label="city" :key="city">{{ city }}</el-checkbox-button>
                  </el-checkbox-group>
                </div>
              </div>
            </div>

          </div>
          <div v-else>
            <p>–±—É—Å–∞–¥ —ç–∫—Å–ø–æ—Ä—Ç –∏–º–ø–æ—Ä—Ç –±–∞–π—Ö–≥“Ø–π Oh no üò¢</p>
          </div>
        </div>
        <el-row>
          <el-button type="primary" plain>–¶—ç–≤—ç—Ä–ª—ç—Ö</el-button>
          <el-button type="success" @click="borderPortTimeSave" :plain="true">–•–∞–¥–≥–∞–ª–∞—Ö</el-button>
        </el-row>

      </el-drawer>

    </div>
  </main>
</template>
<script>
import { post } from '@/utils/request';


export default {
  data() {
    return {
      portWork: false,
      checked: false,
      nemeltChecked: false,
      nemeltAmraltiinOdor: false,
      amraltiinOdor: false,
      startTime: null,
      endTime: null,
      tsaiStartTime: null,
      tsaiEndTime: null,
      portDescription: null,
      value1: null,
      additionName: null,
      additionStartTime: null,
      additionEndTime: null,
      additionTsaiStartTime: null,
      additionTsaiEndTime: null,
      checkboxGroup1: ['–ë—è–º–±–∞', '–ù—è–º'],
      checkboxGroup2: ['–ù—è–º'],
      additionalTransportation: false,
      cities: ['–î–∞–≤–∞–∞', '–ú—è–≥–º–∞—Ä', '–õ—Ö–∞–≤–≥–∞', '–ü“Ø—Ä—ç–≤', '–ë–∞–∞—Å–∞–Ω', '–ë—è–º–±–∞', '–ù—è–º'],
      name: null,
      drawer: false,
      borderPortName: null,
    }
  },
  async mounted() {
    this.allTime();
  },
  methods: {
    async allTime() {
      try {
        const myData = {
          userId: localStorage.getItem("userId"),
        }
        const res = await post('/borderPortViewNames', myData);
        // console.log("res =>", res.data.data);
        this.borderPortName = res.data.data;
      } catch (error) {
        console.error("Error fetching border port data:", error);
      }
    },
    async borderPortTimeSave() {
      try {
        if (localStorage.getItem("userId") && localStorage.getItem("portId")) {
          const myData = {
            additionalTransportation: this.additionalTransportation,
            portWork: this.portWork,
            checked: this.checked,
            nemeltChecked: this.nemeltChecked,
            nemeltAmraltiinOdor: this.nemeltAmraltiinOdor,
            amraltiinOdor: this.amraltiinOdor,
            startTime: this.startTime,
            endTime: this.endTime,
            tsaiStartTime: this.tsaiStartTime,
            tsaiEndTime: this.tsaiEndTime,
            portDescription: this.portDescription,
            value1: this.value1,
            additionName: this.additionName,
            additionStartTime: this.additionStartTime,
            additionEndTime: this.additionEndTime,
            additionTsaiStartTime: this.additionTsaiStartTime,
            additionTsaiEndTime: this.additionTsaiEndTime,
            checkboxGroup1: this.checkboxGroup1,
            checkboxGroup2: this.checkboxGroup2,
            createUserId: localStorage.getItem("userId"),
            borderPortId: localStorage.getItem("portId"),
          }
          const res = await post('/portTimeSave', myData);
          // console.log("object=>", res.data.data);
          if (res.data.data.success === true) {
            this.$message({
              message: '—Ü–∞–≥–∏–π–Ω —Ö—É–≤–∞–∞—Ä—å –∞–º–∂–∏–ª—Ç—Ç–∞–π —Ö–∞–¥–≥–∞–ª–ª–∞–∞.',
              type: '–ê–º–∂–∏–ª—Ç—Ç–∞–π'
            });
          }
        } else {
          this.$notify.error({
            title: '–ê–ª–¥–∞–∞',
            message: '–¶–∞–≥–∏–π–Ω —Ö—É–≤–∞–∞—Ä—å –±“Ø—Ä—ç–Ω –æ—Ä—É—É–ª–Ω–∞ —É—É'
          });
        }


      } catch {
        alert("–ê–ª–¥–∞–∞ –≥–∞—Ä–ª–∞–∞ –∞—Ö–∏–Ω –æ—Ä–æ–ª–¥–æ–Ω–æ —É—É")
      }
    },
    portClick(value, id) {
      this.name = value;
      console.log("value=> ", value, "id => ", id);
      localStorage.setItem("portId", id);
      this.drawer = true
    }
  }
}
</script>
<style scoped>
.garchig {
  margin: 5%;
}

.el-switch {
  /* width: 30%; */
  margin: 3%;
}

.borderPort {
  margin: 1%;
}
</style>


